package com.bank.run;

import java.util.ArrayList;
import java.util.Scanner;

import com.bank.pojos.Account;
import com.bank.pojos.User;
import com.bank.service.Service;

public class RunBank 
{
	static Scanner scan;
	static 	Service service = new Service ();
	
	public static void main(String[] args) 
	{
		String choice = "empty"; //used for user input options
		User u = new User();
		scan = new Scanner (System.in);
		
		while(true)
		{
			
			System.out.println("Welcome to bank"
					+ "\n"
					+"Are you alredy a member? y or n?");
			choice = scan.nextLine();
			;
			switch(choice)
			{
			case "y":
			case "Y":
			{
				u = loginBank();
				break;
			}
			case "n":
			case "N":
			{
			    joinBank();
			    u = loginBank();
				break;
			}
			default:
			{
				System.out.println("You must enter y or n");
				continue;
			}
			}
			
			if(u != null)
			{
			System.out.println("Welcome!" + u.getFn() + " " + u.getLn());
			doBankStuff(u);
			break;
			}
			
		}
		
		
	}
	
	static void joinBank ()
	{
		System.out.println("Please enter your first name");
		String fn = scan.nextLine();
		System.out.println("Please enter your last name");
		String ln = scan.nextLine();
		System.out.println("Please enter your email");
		String email = scan.nextLine();
		System.out.println("Please enter your password");
		String pw = scan.nextLine();
		
		
		boolean added = service.AddUser(fn, ln, email, pw);
		
		if(added)
		{
			System.out.println("Congratulations! Your account has been created \n"
					+ "Please login");
		}
		else
		{
			System.out.println("Email is already in uese. Please login.");
		}
		
	}
	
	static User loginBank ()
	{
		User temp = new User();
		
		while(true)
		{
			System.out.print("Welcome! please login\n"
					+ "Eneter email: ");
			String email = scan.nextLine();
			System.out.print("\n Enter password: ");
			String pass = scan.nextLine();
			
			temp = service.loginUser(email, pass);
			
			if(temp == null)
			{
				System.out.println("Inccorrect email or password \n");
				System.out.println("Try again? Y or N?");
				String choice = scan.nextLine();
				
				if (choice.equals("y") || choice.equals("Y"))
					continue;
				else
				{
					System.out.println("User not logged in. If you are a new user please create an Account first \n");
					break;
				}
			}
			else
				break;
			
		}
		
		System.out.println(temp);
		return temp;
	}
	
	static void doBankStuff (User u)
	{
		//used to show accounts to user
		ArrayList <Account> myAccount = new ArrayList<Account>();
		
		myAccount = service.getAccount(u);
		
		if(myAccount != null)
		{
			
		}
		else
		{
			System.out.println("No current accouts");
		}
		
		System.out.println("doing stuff in bank");
		System.out.println("logging out of bank");
	}
}
