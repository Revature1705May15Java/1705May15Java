package com.reim.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;


import com.reim.util.ConnectionFactory;
import com.reim.pojos.Employee;
import com.reim.pojos.Request;

public class DaoImpl implements Dao {

	@Override
	public ArrayList<Request> findReqByEmpId(int emp_id) {
		// TODO Auto-generated method stub
		
		
		return null;
	}

	@Override
	public Employee findEmpByUname(String uname) {
		// TODO Auto-generated method stub
		
		Employee e = null;
		uname = uname.toLowerCase();
		try(Connection connect = ConnectionFactory.getInstance().getConnection();){
			String sql = "select * from Employee where lower(username) = ?";
			PreparedStatement ps = connect.prepareStatement(sql);
			ps.setString(1, uname.toLowerCase());
			
			ResultSet emp = ps.executeQuery();
			//id, fn, ln, pw, uname
			e = new Employee();
			while(emp.next()){
				e.setEmployee_id(emp.getInt(1));
				e.setFn(emp.getString(2));
				e.setLn(emp.getString(3));
				e.setUname(emp.getString(4));
				e.setPw(emp.getString(5));
				e.setIs_manager(emp.getInt(6));
				
			}
			if(u.getUname()!=null){
			System.out.println("employee: " +u.toString());
			}
			return u;
		} catch (SQLException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		return u;
		
	}
	
}
