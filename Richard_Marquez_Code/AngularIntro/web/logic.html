<!DOCTYPE html>
<html ng-app="todoApp">
<head>
    <meta charset="UTF-8">
    <title>Todo List</title>

    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
</head>
<body ng-controller="TodoController">


<div class="container-fluid">
    <div class="row">
        <div class="col-md-6 col-md-offset-3">

            <h1>Hey, {{todo.user}}</h1>

            <table class="table">
                <tr>
                    <td>Name:</td>
                    <td><input class="form-control" type="text" ng-model="todo.user"/></td>
                </tr>
            </table>

            <h3>Todo List  <span style="font-size:small;" ng-hide="incompleteCount()===0">Items left: {{incompleteCount()}}</span> </h3>



            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Description</th>
                        <th>Done</th>
                    </tr>
                </thead>

                <tr ng-repeat="item in todo.items | checkedItems:showComplete | orderBy:'action'">
                    <td>{{item.action}}</td>
                    <td><input type="checkbox" ng-model="item.done" style="cursor:pointer;"/></td>
                </tr>

            </table>

            <p>
                <input class="form-control" type="text" ng-model="actionText" id="newItem" placeholder="Add new item..."/>
            </p>

            <p>
                <button class="btn btn-primary" ng-click="addNewItem(actionText)">Add Item</button>
                <label for="complete">Show Complete</label> : <input id="complete" type="checkbox" ng-model="showComplete"/>
            </p>
        </div>
    </div>
</div>


<script>
    var model = {
        user: 'User',
        items: [
            { action: "complete project 2", done: false },
            { action: "studey", done: true },
            { action: "make dinns", done: false }
        ]
    };

    var app = angular.module('todoApp', [])
        .controller('TodoController', function ($scope) {
            $scope.todo = model;
            $scope.incompleteCount = function() {
                var count = 0;

                angular.forEach($scope.todo.items, function(item) {
                    if (!item.done) ++count;
                });

                return count;
            };

            $scope.addNewItem = function(actionText) {
                if (actionText && actionText.length > 0) {
                    model.items.push({action: actionText, done: false});
                }
                $('#newItem').val('');
            }

        });

    app.filter('checkedItems', function() {
        return function(items, showComplete) {
            var resultArr = [];
            angular.forEach(items, function(item) {
                if (item.done === false || showComplete === true) {
                    resultArr.push(item);
                }
            });

            return resultArr;
        };
    });

</script>

</body>
</html>