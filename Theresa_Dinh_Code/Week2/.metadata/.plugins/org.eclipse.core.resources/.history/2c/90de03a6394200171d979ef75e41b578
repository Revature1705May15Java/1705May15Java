package servicelayer;

import dao.BankDao;
import pojos.Account;
import pojos.User;

public class BankService 
{
	BankDao dao = new BankDao(); 
	
	// create new User for dao 
	public User addUser(String fn, String ln, String pw, String email)
	{
		User temp = new User(); 
		temp = dao.getUser(email); 
		if(temp != null)
		{
			System.out.println("Username already exists. Try again with a new username."); 
		}
		else
			dao.addUser(fn, ln, pw, email); 
		return dao.getUser(email); 
	}
	
	public double viewBalance(Account account)
	{
		return dao.viewBalance(account);
	}
	
	// takes amount to be removed from given account balance, returns the new balane
	public boolean withdraw(Account account, double amount)
	{
		double newBalance = dao.viewBalance(account) - amount; 
		newBalance = dao.updateBalance(account, newBalance); 
		account.setBalance(newBalance);
		
		if(dao.viewBalance(account) == account.getBalance())  //check that the balances are correct in both
			return true;
		else
			return false;  
	}
	
	// takes amount to be added to given account balance, returns the new balane
	public boolean deposit(Account account, double amount)
	{
		double newBalance = dao.viewBalance(account) + amount; 
		newBalance = dao.updateBalance(account, newBalance);
		account.setBalance(newBalance);
		
		if(dao.viewBalance(account) == account.getBalance())  //check that the balances are correct in both
			return true;
		else
			return false; 
	}
	
	public boolean transfer(Account from, Account to, double amount)
	{
		if(withdraw(from, amount) & deposit(to, amount))
			return true;
		else
			return false; 
	}
	
}
