package dao;

import java.util.ArrayList;

import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.Transaction;

import pojos.Person;
import util.ConnectionUtil;

public class HibDao implements Dao
{

	public void createPerson(Person p)
	{
		Session session = ConnectionUtil.getSession();
		
		try
		{
			Transaction t = session.beginTransaction(); 
			session.save(p); 
			t.commit();
		}
		finally
		{
			session.close();
		}
	}

	public Person getPersonById(int id) 
	{
		Session session = ConnectionUtil.getSession(); 
		Person p = null; 
		
		try
		{
			p = (Person)session.get(Person.class, id); 
			System.out.println(p);
		}
		catch(HibernateException e)
		{
			e.printStackTrace();
		}
		finally
		{
			session.close();
		}
		return p;
	}

	public ArrayList<Person> getPeople()
	{
		Session session = ConnectionUtil.getSession();
		List<Person> list = new ArrayList<Person>(); 
		
		try
		{
			list = session.createQuery("from pojos.Person").list(); 
			
		}
		catch(HibernateException e)
		{
			e.printStackTrace(); 
		}
		finally
		{
			session.close();
		}
		
	}
}
